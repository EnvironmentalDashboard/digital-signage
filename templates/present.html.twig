<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=9ByOqqx0o3">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=9ByOqqx0o3">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=9ByOqqx0o3">
  <link rel="manifest" href="/manifest.json?v=9ByOqqx0o3">
  <link rel="mask-icon" href="/safari-pinned-tab.svg?v=9ByOqqx0o3" color="#00a300">
  <link rel="shortcut icon" href="/favicon.ico?v=9ByOqqx0o3">
  <meta name="theme-color" content="#000000">
  <title>Environmental Dashboard Digital Display</title>
  <style>
    body {
      margin: 0px;
      padding: 0px;
    }
    .presentation {
      height: 100%;
      width: 100%;
    }
  </style>
</head>

<body>
  {% for presentation in cycle %}
    <div id="pres{{presentation.id}}" class="presentation"{% if loop.index != 1 %} style="display:none"{% endif %}>
    {{ presentation.markup|raw }}
    </div>
  {% endfor %}
  <script>
    var pres_durations = {{ pres_durations|json_encode|raw }};
    var pres_ids = Object.keys(pres_durations);
    var cur_pres = 0, last_pres = pres_ids.length-1;
    function next_pres() {
      if (cur_pres === last_pres) {
        cur_pres = 0;
      }
      document.getElementById('pres' + pres_ids[cur_pres]).style.display = 'none';
      cur_pres++;
      document.getElementById('pres' + pres_ids[cur_pres]).style.display = 'initial';
      setTimeout(next_pres, pres_durations[pres_ids[cur_pres]] * 1000);
    }
    setTimeout(next_pres, pres_durations[pres_ids[cur_pres]] * 1000);
    
  </script>
</body>

</html>